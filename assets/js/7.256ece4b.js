(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{207:function(s,a,e){"use strict";e.r(a);var n=e(28),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"前端测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端测试"}},[s._v("#")]),s._v(" 前端测试")]),s._v(" "),e("h2",{attrs:{id:"单元测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单元测试"}},[s._v("#")]),s._v(" 单元测试")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("基本概念")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("单元测试的目的：让开发者明确代码的输出。")])]),s._v(" "),e("li",[e("p",[s._v("原则：单一职责、接口抽象、层次分离。")])]),s._v(" "),e("li",[e("p",[s._v("断言库")])]),s._v(" "),e("li",[e("p",[s._v("单元测试两种风格：TDD：测试驱动开发。BDD：行为驱动开发。")])])])]),s._v(" "),e("li",[e("p",[s._v("karma+jasmine+karma-coverage")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("karma 提供了测试集成环境")])]),s._v(" "),e("li",[e("p",[s._v("jasmine 单元测试框架 自带断言")])]),s._v(" "),e("li",[e("p",[s._v("karma-coverage 单元测试覆盖率")])]),s._v(" "),e("li",[e("p",[s._v("karma init 初始化测试项目 生成 karma.conf.js")]),s._v(" "),e("ul",[e("li",[s._v("常用配置项\n"),e("ul",[e("li",[s._v("frameworks: 测试框架\n"),e("ul",[e("li",[e("code",[s._v("frameworks: ['jasmine']")])])])]),s._v(" "),e("li",[s._v("files: 需要测试的文件 符合 glob 格式\n"),e("ul",[e("li",[e("code",[s._v("files: ['unit/**/*.js']")])])])]),s._v(" "),e("li",[s._v("exclude: 排除哪些文件")]),s._v(" "),e("li",[s._v("preprocessors: 预处理操作\n"),e("ul",[e("li",[e("code",[s._v("preprocessors:{'unit/**/*.js': 'coverage'}")])])])]),s._v(" "),e("li",[s._v("reporters: 生成报告\n"),e("ul",[e("li",[e("code",[s._v("reporters: ['progress', 'coverage']")])])])]),s._v(" "),e("li",[s._v("port: 端口号")]),s._v(" "),e("li",[s._v("autoWatch: 是否自动监听文件变化")]),s._v(" "),e("li",[s._v("singleRun: 是否运行完成退出浏览器")])])])])]),s._v(" "),e("li",[e("p",[s._v("karma start: 运行测试用例，生成测试报告")])])])])]),s._v(" "),e("h2",{attrs:{id:"接口测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接口测试"}},[s._v("#")]),s._v(" 接口测试")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("mocha+chai+supertest: 异步接口测试")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("supertest: 模拟 http 请求")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    var request = () => supertest(app);\n\n    it ('test index', function(done){\n        requset()\n            .get('/')\n            .expect(200, done)\n        })\n    \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("chai: 断言库")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    var { expect } = require('chai')\n    var { should } = require('chai')\n    var { assert } = require('chai')\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("mocha")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("./node_modules/.bin/mocha server/app.spec.js 运行接口测试文件")])]),s._v(" "),e("li",[e("p",[s._v("用 mocha + mochawesome 生成测试报告")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("生成 mochaRunner.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    var Mocha = require('mocha')\n\n    var mocha = new Mocha({\n        reporter: 'mochawesome'\n    })\n\n    mocha.addFile(path.join(__dirname, './app.spec.js'))\n\n    mocha.run()\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("node mochaRunner.js 生成测试报告")])])])])])])])])]),s._v(" "),e("h2",{attrs:{id:"e2e测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#e2e测试"}},[s._v("#")]),s._v(" e2e测试")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("selenium-webdriver + 浏览器 driver")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("需要下载对应的浏览器 driver")])]),s._v(" "),e("li",[e("p",[s._v("新建一个 js 文件（例如 test.js）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    (async function () {\n        var { Builder, By, Key, until } = require('selenium-webdriver')\n\n        var driver = await new Builder().forBrowser('chrome').build()\n\n        try {\n\n            await driver.get('http://www.baidu.com')\n            await driver.findElement(By.name('wd')).sendKeys('npm', Key.RETURN)\n            await driver.wait(until.titleIs('npm_百度搜索'), 2000)\n\n        } catch {\n\n        } finally {\n            await driver.quit()\n        }\n    })()\n    \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("node index.js 运行 e2e 测试")])])])])]),s._v(" "),e("h2",{attrs:{id:"ui测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ui测试"}},[s._v("#")]),s._v(" UI测试")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("backstopjs")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("./node_modules/.bin/backstop init: 生成配置文件 backstop.json 和 backstop_data 文件夹")])]),s._v(" "),e("li",[e("p",[s._v("backstop.json 主要配置项")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("viewports: 测试机型 根据设计稿设置 width、height")])]),s._v(" "),e("li",[e("p",[s._v("onBeforeScript: 'puppet/onBefore.js' 该文件在 backstop_data/engine_scripts/puppet/onBefore.js （该 base path 可以在 paths 配置）")])]),s._v(" "),e("li",[e("p",[s._v("scenarios: 设置要测试的文件 options")]),s._v(" "),e("ul",[e("li",[e("p",[s._v('cookiePath: "backstop_data/engine_scripts/cookies.json"')])]),s._v(" "),e("li",[e("p",[s._v("url: 测试链接")])])])]),s._v(" "),e("li",[e("p",[s._v("paths: 配置 bitmap 和 script 的 base path, 例如 engine_scripts 设置 onBefore and onReady scripts 的 base path")])])])]),s._v(" "),e("li",[e("p",[s._v("./node_modules/backstop test 运行 backstop.json 进行 UI 测试。")])])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);